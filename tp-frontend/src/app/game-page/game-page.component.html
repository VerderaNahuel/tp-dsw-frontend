<!-- Barra de navegacion -->
<app-nav-bar></app-nav-bar>
<!-- Review -->
<body>
  <div class="row justify-content-md-center">
    <img src="{{ this.gameData.cover }}" class="img-fluid box" />
  </div>
  <div class="row justify-content-md-center">
    <div class="content">
      <h1 style="display: flex; align-content: center">
        {{ this.gameData.name }}
      </h1>
      <div style="align-content: center" class="">
        <p>
          {{ this.gameData.description }}
        </p>
        <p style="font-weight: bold">
          Fecha de lanzamiento:
          {{ this.gameData.release_date.substring(0, 10) }}
        </p>
        <div class="text-center mb-3">
          <span
            class="{{ calculateColorRating(this.gameData.rating) }} ml-20"
            style="font-size: 25px"
            >{{ this.gameData.rating }}</span
          >
        </div>
      </div>
    </div>
  </div>

  <div *ngFor="let review of reviews; let i = index">
    <app-review
      [review]="reviews[i]"
      [userData]="userData"
      [gameData]="gameData"
    ></app-review>
  </div>

  <div class="container mt-5 form border" *ngIf="!reviewed">
    <form (ngSubmit)="postReview()">
      <h2>Deja tu review</h2>

      <div class="container">
        <div class="row">
          <div class="col-sm-3"><p>La review contiene spoilers?</p></div>
          <div class="col-sm-1">
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                id="miCheckbox"
                [ngModel]="this.review.spoiler_check"
                name="miCheckbox"
                (ngModelChange)="toggleSwitchSpoiler()"
              />
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="rating">Puntuaci√≥n (1-100):</label>
        <input
          type="number"
          id="rating"
          class="form-control"
          name="rating"
          min="1"
          max="100"
          [(ngModel)]="this.review.rating"
          [ngClass]="{ 'is-invalid': invalid_rating }"
        />
      </div>

      <div class="form-group">
        <label for="comment">Comentario:</label>
        <textarea
          id="comment"
          class="form-control"
          name="body"
          [(ngModel)]="this.review.body"
          [ngClass]="{ 'is-invalid': invalid_body }"
        ></textarea>
      </div>

      <button class="btn btn-primary" type="submit">Enviar Review</button>
    </form>
  </div>
</body>
